(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app.hr"],{"0351":function(t,e){t.exports=!!Object({NODE_ENV:"production",VUE_APP_HTTPS:"",VUE_APP_GTAG:"",VUE_APP_DIST_VERSION:"20210715163410",BASE_URL:""}).VUE_APP_VERCEL},"072a":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a("5530"),n=(a("07ac"),a("60bb")),s=a.n(n),i=a("6a80"),o=s.a.mapValues(i,(function(t,e){return Object(r["a"])({name:e},t)}));Object.values(o);e["b"]={characterTable:o,characterList:Object.values(o)}},"0f8f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-hr"}},[a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-xs-12"},[a("div",{class:!!t.$root.smallScreen&&"mdui-drawer mdui-drawer-right mdui-drawer-close",attrs:{id:"drawer"}},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.stars")))])]),a("td",{staticClass:"mobile-screen-flex-box tag-btn-wrap"},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.allStar?t.color.selected:t.color.notSelected,expression:"allStar ? color.selected : color.notSelected"}],staticClass:"mdui-btn mdui-btn-dense mdui-ripple tag-btn flex-full",on:{click:function(e){t.selected.star=t.$_.fill(Array(t.selected.star.length),!t.allStar)}}},[t._v(t._s(t.$t("common.selectAllShorten")))]),t._l(6,(function(e){return a("tag-button",{directives:[{name:"show",rawName:"v-show",value:!(6-e<2&&t.setting.hide12),expression:"!(6 - i < 2 && setting.hide12)"}],key:"star-"+(7-e),staticClass:"flex-equally",attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[7-e]},model:{value:t.selected.star[6-e],callback:function(a){t.$set(t.selected.star,6-e,a)},expression:"selected.star[6 - i]"}},[t._v(t._s(7-e)+"★")])}))],2)]),t._l(t.tagList.sort,(function(e){return a("tr",{key:e},[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("hr.tagType."+e)))])]),a("td",{staticClass:"mobile-screen-flex-box tag-btn-wrap"},t._l(t.tagList[e],(function(r){return a("tag-button",{key:e+"-"+r,attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color.selected},model:{value:t.selected.tag[r],callback:function(e){t.$set(t.selected.tag,r,e)},expression:"selected.tag[tag]"}},[t._v(t._s(t.$t("tag."+r)))])})),1)])})),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.setting")))])]),a("td",[t._l(t.settingList,(function(e){return a("mdui-switch",{key:e,model:{value:t.setting[e],callback:function(a){t.$set(t.setting,e,a)},expression:"setting[key]"}},[t._v(t._s(t.$t("hr.setting."+e)))])})),t.$root.serverNotZH?a("mdui-switch",{staticClass:"mdui-m-r-2",model:{value:t.setting.showNotImplemented,callback:function(e){t.$set(t.setting,"showNotImplemented",e)},expression:"setting.showNotImplemented"}},[t._v(t._s(t.$t("hr.setting.showNotImplemented")))]):t._e()],2)]),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.tagBtnHead,expression:"$root.color.tagBtnHead"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn tag-table-header"},[t._v(t._s(t.$t("common.option")))])]),a("td",{staticClass:"mobile-screen-flex-box tag-btn-wrap"},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.redBtn,expression:"$root.color.redBtn"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn",on:{click:t.reset}},[t._v(t._s(t.$t("common.reset")))]),a("label",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-purple","mdui-color-purple-a100 mdui-ripple-black"],expression:"[\n                    'mdui-color-purple',\n                    'mdui-color-purple-a100 mdui-ripple-black',\n                  ]"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn btn-group-left",attrs:{for:"image-select","mdui-tooltip":"{content:'"+t.$t("hr.ocr.tip")+"',position:'top'}"},on:{dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),function(e){return t.tagImg=e.dataTransfer.files[0]}(e)}}},[t._v(t._s(t.$t("hr.ocr.button"))+" ("+t._s(t.$root.server.toUpperCase())+")")]),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",id:"image-select",accept:"image/*"},on:{change:function(e){t.tagImg=t.$refs.image.files[0]}}}),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-purple","mdui-color-purple-a100 mdui-ripple-black"],expression:"[\n                    'mdui-color-purple',\n                    'mdui-color-purple-a100 mdui-ripple-black',\n                  ]"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn btn-group-right no-grow",on:{click:function(e){return t.$refs.apikeyDialog.open()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("settings")])]),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-blue-600","mdui-color-blue-200 mdui-ripple-black"],expression:"['mdui-color-blue-600', 'mdui-color-blue-200 mdui-ripple-black']"}],staticClass:"mdui-btn mdui-ripple mdui-btn-dense tag-btn",on:{click:function(e){t.reset(),t.$nextTick((function(){return t.showGuarantees=!0}))}}},[t._v(t._s(t.$t("hr.showBaoDi")))])])])],2)])])])]),t.isTagsSelected(["高级资深干员","资深干员","支援机械"])?a("div",{staticClass:"mdui-chip-group",class:t.$root.smallScreen?"mdui-m-b-1":"mdui-m-t-4"},[t.isTagsSelected(["高级资深干员","资深干员"])?a("div",{staticClass:"mdui-chip"},[t._m(0),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v(t._s(t.$t("hr.tip.rare")))])]):t._e(),t.isTagsSelected("支援机械")?a("div",{staticClass:"mdui-chip"},[t._m(1),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v(t._s(t.$t("hr.tip.robot")))])]):t._e()]):t._e(),a("div",{staticClass:"mdui-row",class:{"mdui-m-t-4":!t.$root.smallScreen}},[a("div",{staticClass:"mdui-col-xs-12"},[t.$root.smallScreen?a("div",{staticClass:"comb-small"},[a("table",{staticClass:"mdui-table comb-table mdui-shadow-0 no-border bg-transparent hide-last-tr-border"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("hr.table.header.tag")))]),a("th",[t._v(t._s(t.$t("hr.table.header.possibility")))])])]),a("tbody",[t._l(t.combinations,(function(e,r){return[a("tr",{key:"comb-"+r+"-tr1"},[a("td",{staticClass:"mdui-p-b-0 no-border",attrs:{colspan:"2"}},[t._l(e.tags,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color.selected,expression:"color.selected"}],key:"comb-"+r+"-"+e,staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(t.$t("tag."+e)))])})),a("div",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color.text[e.min],expression:"color.text[comb.min]"}],staticClass:"mdui-btn-bold no-sl no-pe mdui-float-right min-star"},[t._v(t._s(e.min)+"★")])],2)]),a("tr",{key:"comb-"+r+"-tr2"},[a("td",{attrs:{colspan:"2"}},t._l(e.chars,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[e.star],expression:"color[char.star]"}],key:"comb-"+r+"-"+e.name,staticClass:"mdui-btn mdui-btn-dense tag-btn",attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.isPub(e.recruitment)?t._e():a("div",{staticClass:"tag-triangle"}),t.setting.showAvatar?a("avatar",{staticClass:"tag-avatar no-pe",attrs:{name:e.name}}):t._e(),a("span",[t._v(t._s(t.$t("character."+e.name)))])],1)})),0)])]})),0==t.combinations.length?a("tr",[a("td",{staticClass:"no-border",attrs:{colspan:"2"}},[t._v(t._s(t.$t("hr.table.selectTip")))])]):t._e()],2)])]):a("div",{staticClass:"comb-large"},[a("table",{staticClass:"mdui-table mdui-table-hoverable comb-table hide-last-tr-border"},[a("thead",[a("tr",{class:{"tbody-is-empty":!t.combinations.length}},[a("th",{staticClass:"mdui-table-col-numeric",attrs:{width:"1"}},[t._v("#")]),a("th",{attrs:{width:"20%"}},[t._v(t._s(t.$t("hr.table.header.tag")))]),a("th",{staticClass:"mdui-text-center",attrs:{width:"1"}},[t._v(t._s(t.$t("hr.table.header.minRarity")))]),a("th",{attrs:{width:"80%"}},[t._v(t._s(t.$t("hr.table.header.possibility")))])])]),a("tbody",t._l(t.combinations,(function(e,r){return a("tr",{key:"comb-"+r},[a("td",[t._v(t._s(r+1))]),a("td",t._l(e.tags,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color.selected,expression:"color.selected"}],key:"comb-"+r+"-"+e,staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(t.$t("tag."+e)))])})),0),a("td",[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[e.min],expression:"color[comb.min]"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(e.min)+"★")])]),a("td",t._l(e.chars,(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[e.star],expression:"color[char.star]"}],key:"comb-"+r+"-"+e.name,staticClass:"mdui-btn mdui-btn-dense tag-btn",attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.isPub(e.recruitment)?t._e():a("div",{staticClass:"tag-triangle"}),t.setting.showAvatar?a("avatar",{staticClass:"tag-avatar no-pe",attrs:{name:e.name}}):t._e(),a("span",[t._v(t._s(t.$t("character."+e.name)))])],1)})),0)])})),0)])])])]),a("mdui-dialog",{ref:"detailDialog",staticClass:"mdui-card",attrs:{id:"detail"}},[t.detail?a("div",{staticClass:"mdui-card-header mdui-p-b-0"},[a("avatar",{key:"di-"+t.detail.name,staticClass:"mdui-card-header-avatar no-pe",attrs:{name:t.detail.name}}),a("div",{staticClass:"mdui-card-header-title mdui-m-t-1"},[a("span",[t._v(t._s(t.$t("character."+t.detail.name)))]),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.color[t.detail.star],expression:"color[detail.star]"}],staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-y-0 mdui-m-l-1"},[t._v(t._s(t.detail.star)+"★")])]),a("div",{staticClass:"detail-tags mdui-m-t-1"},t._l([t.detail.profession,t.detail.position].concat(t.detail.tags),(function(e){return a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.selected.tag[e]?t.color.selected:t.color.notSelected,expression:"selected.tag[tag] ? color.selected : color.notSelected"}],key:"detail-"+e,staticClass:"mdui-btn mdui-btn-dense no-pe tag-btn"},[t._v(t._s(t.$t("tag."+e)))])})),0)],1):t._e(),a("div",{staticClass:"mdui-dialog-actions"},[a("a",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-teal","mdui-color-teal-300 mdui-ripple-black"],expression:"['mdui-color-teal', 'mdui-color-teal-300 mdui-ripple-black']"}],staticClass:"mdui-btn mdui-ripple",attrs:{href:t.$root.getWikiHref(t.detail),target:"_blank"}},[t._v(t._s(t.$t("common.viewOnWiki")))]),a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:["mdui-color-pink","mdui-color-indigo-a100 mdui-ripple-black"],expression:"['mdui-color-pink', 'mdui-color-indigo-a100 mdui-ripple-black']"}],staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-close":""}},[t._v(t._s(t.$t("common.close")))])])]),a("mdui-dialog",{ref:"apikeyDialog",staticClass:"mdui-typo",attrs:{id:"detail"}},[a("div",{staticClass:"mdui-dialog-title"},[t._v("OCR "+t._s(t.$t("common.setting")))]),a("div",{staticClass:"mdui-dialog-content mdui-p-b-0"},[a("div",{staticClass:"mdui-textfield mdui-p-t-0"},[a("label",{staticClass:"mdui-textfield-label"},[t._v("OCR Space API Key")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.setting.ocrspaceApikey,expression:"setting.ocrspaceApikey",modifiers:{trim:!0}}],staticClass:"mdui-textfield-input",attrs:{type:"text"},domProps:{value:t.setting.ocrspaceApikey},on:{input:function(e){e.target.composing||t.$set(t.setting,"ocrspaceApikey",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("i18n",{staticClass:"mdui-m-y-1",attrs:{path:"hr.ocr.setting.tip",tag:"div"}},[a("a",{attrs:{href:"https://ocr.space/",target:"_blank",rel:"noopener"}},[t._v("OCR Space")]),a("a",{attrs:{href:"https://ocr.space/OCRAPI",target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("hr.ocr.setting.applyLink")))])])],1),a("div",{staticClass:"mdui-dialog-actions"},[a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.dialogTransparentBtn,expression:"$root.color.dialogTransparentBtn"}],staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v(t._s(t.$t("common.close")))])])]),t.$root.smallScreen?a("button",{directives:[{name:"theme-class",rawName:"v-theme-class",value:t.$root.color.pinkBtn,expression:"$root.color.pinkBtn"}],staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-ripple",on:{click:function(e){t.drawer||(t.drawer=new t.$Drawer("#drawer")),t.drawer.toggle()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdui-chip-icon mdui-color-red"},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdui-chip-icon mdui-color-red"},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])}],s=a("1da1"),i=a("3835"),o=a("2909"),c=a("b85c"),l=a("ade3"),u=a("5530"),d=(a("96cf"),a("dca8"),a("cb29"),a("d81d"),a("6062"),a("d3b7"),a("3ca3"),a("ddb0"),a("5db7"),a("73d9"),a("caad"),a("2532"),a("b0c0"),a("4de4"),a("99af"),a("a15b"),a("8a79"),a("1276"),a("ac1f"),a("13d5"),a("5319"),a("4d63"),a("25f0"),a("498a"),a("2ca0"),a("159b"),a("a630"),a("d6cb"),a("60bb")),m=a.n(d),p=a("ab3e"),h=a("f71e"),b=a("29d9"),v=a("f52e"),g=a("0351"),f=a.n(g),_=a("072a"),w=a("86c6"),k=a("60fe"),y=new b["a"]("hr"),$=m.a.mapValues(m.a.invert(w),parseInt);Object.freeze($);var C={name:"arkn-hr",data:function(){var t;return Object(u["a"])(Object(u["a"])({showAll:!1},_["b"]),{},{hr:m.a.clone(_["b"].characterList).sort((function(t,e){return e.star-t.star})),tags:(t={},Object(l["a"])(t,$.资深干员,[]),Object(l["a"])(t,$.高级资深干员,[]),t),selected:{star:m.a.fill(Array(6),!0),tag:{}},setting:{showAvatar:!1,hide12:!1,showPrivate:!1,showNotImplemented:!1,ocrspaceApikey:""},settingList:["showAvatar","hide12","showPrivate"],avgCharTag:0,tagList:{locations:[$.近战位,$.远程位],credentials:[$.新手,$.资深干员,$.高级资深干员],professions:Array(8).fill(null).map((function(t,e){return e+1})),abilities:new Set,sort:["credentials","locations","professions","abilities"]},color:k["a"],detail:!1,drawer:!1,tagImg:!1,tagsCache:[],showGuarantees:!1})},watch:{"selected.tag":{handler:function(){this.showGuarantees=!1;var t=m.a.flatMap(this.selected.tag,(function(t,e){return t?[e]:[]}));if(t.length>6){for(var e in new this.$alert(this.$t("hr.tagOverLimit"),null,null,{confirmText:this.$t("common.okay"),history:!1}),this.selected.tag)this.selected.tag[e]=this.tagsCache.includes(e);t=this.tagsCache}else this.tagsCache=t},deep:!0},setting:{handler:function(t){y.setItem("setting",t)},deep:!0},tagImg:function(t){f.a&&this.$root.serverCN?this.vercelApiOCR(t):this.OCR(t),this.$gtag.event("hr_ocr",{event_category:"hr",event_label:"ocr"})}},computed:{allStar:function(){return m.a.sum(this.selected.star)==this.selected.star.length},combinations:function(){var t=this;if(this.showGuarantees)return this.guarantees;var e,a=m.a.flatMap(this.selected.tag,(function(t,e){return t?[e]:[]})),r=m.a.flatMap(this.selected.star,(function(t,e){return t?[e+1]:[]})),n=m.a.flatMap([1,2,3],(function(t){return m.a.combinations(a,t)})).map((function(t){return t.map((function(t){return parseInt(t)}))})),s=[],i=Object(c["a"])(n);try{for(i.s();!(e=i.n()).done;){var o,l=e.value,u=[],d=Object(c["a"])(l);try{for(d.s();!(o=d.n()).done;){var p=o.value;u.push(this.tags[p])}}catch(f){d.e(f)}finally{d.f()}this.setting.showPrivate||u.push(this.pubs);var h=m.a.intersection.apply(m.a,u);if(l.includes($.高级资深干员)||m.a.remove(h,(function(t){var e=t.star;return 6===e})),this.setting.showNotImplemented||m.a.remove(h,(function(e){var a=e.name;return!t.$root.isImplementedChar(a)})),0!=h.length){var b=m.a.filter(h,(function(t){var e=t.star;return e>=3}));0==b.length&&(b=h);var v=m.a.sumBy(b,(function(t){var e=t.star;return e}))/b.length-l.length/10-b.length/this.avgCharTag,g=m.a.minBy(b,(function(e){var a=e.recruitment,r=e.star;return t.isPub(a)?r:1/0}));m.a.remove(h,(function(t){var e=t.star;return!r.includes(e)})),this.setting.hide12&&m.a.remove(h,(function(t){var e=t.star;return e<3})),0!=h.length&&s.push({tags:l,chars:h,min:g.star,score:v})}}}catch(f){i.e(f)}finally{i.f()}return s.sort((function(t,e){return t.min==e.min?e.score-t.score:e.min-t.min})),this.$emit("nm",s.some((function(t){var e=t.min;return e>=5}))),s},guarantees:function(){var t,e=this,a=[],r=m.a.flatMap([1,2,3],(function(t){return m.a.combinations([].concat(Object(o["a"])(e.tagList.professions),Object(o["a"])(e.tagList.abilities),Object(o["a"])(e.tagList.locations)),t)})),n=Object(c["a"])(r);try{var s=function(){var r,n=t.value,s=[e.pubs],i=Object(c["a"])(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;s.push(e.tags[o])}}catch(d){i.e(d)}finally{i.f()}var l=m.a.intersection.apply(m.a,s).filter((function(t){var e=t.star;return 3<=e&&e<6}));if(0==l.length)return"continue";var u=m.a.min(l.map((function(t){var e=t.star;return e})));return u<4||a.some((function(t){var e=t.tags,a=t.min;return a===u&&e.every((function(t){return n.includes(t)}))}))?"continue":void a.push({tags:n,min:u,chars:l})};for(n.s();!(t=n.n()).done;)s()}catch(l){n.e(l)}finally{n.f()}return a.sort((function(t,e){for(var a=0,r=[["tags.length",1],["min",-1]];a<r.length;a++){var n=Object(i["a"])(r[a],2),s=n[0],o=n[1],c=o*(m.a.at(t,s)-m.a.at(e,s));if(0!=c)return c}return 0}))},pubs:function(){var t=this;return this.hr.filter((function(e){var a=e.recruitment;return t.isPub(a)}))},enumTag:function(){return m.a.mapValues(m.a.invert(this.$root.i18nServerMessages.tag),parseInt)}},methods:{reset:function(){for(var t in this.showGuarantees=!1,this.selected.star=m.a.fill(Array(this.selected.star.length),!0),this.selected.tag)this.selected.tag[t]=!1},showDetail:function(t){var e=this;this.detail=t,this.$nextTick((function(){return e.$refs.detailDialog.open()}))},isTagsSelected:function(t){var e=this;return m.a.castArray(t).some((function(t){return e.selected.tag[$[t]]}))},vercelApiOCR:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,l,u,d,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.$snackbar,r(e.$t("hr.ocr.processing")),a.next=4,p["a"].tagOCR({image:t,server:e.$root.server}).catch((function(t){return{code:-1,msg:t.message||t}}));case 4:if(n=a.sent,s=n.code,i=n.msg,o=n.tags,0===s){a.next=11;break}return r({message:"".concat(e.$t("hr.ocr.uploadError")).concat(i),timeout:0,buttonText:e.$t("common.retry"),onButtonClick:function(){return e.ocr(t)}}),a.abrupt("return");case 11:e.reset(),console.log("OCR",JSON.stringify(o)),l=0,u=Object(c["a"])(o),a.prev=15,u.s();case 17:if((d=u.n()).done){a.next=27;break}if(m=d.value,!(m in e.enumTag)){a.next=25;break}if(l++,!(l>6)){a.next=24;break}return r(e.$t("hr.ocr.tagOverLimit")),a.abrupt("return");case 24:e.selected.tag[e.enumTag[m]]=!0;case 25:a.next=17;break;case 27:a.next=32;break;case 29:a.prev=29,a.t0=a["catch"](15),u.e(a.t0);case 32:return a.prev=32,u.f(),a.finish(32);case 35:case"end":return a.stop()}}),a,null,[[15,29,32,35]])})))()},OCR:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,l,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={cn:"chs",tw:"cht",us:"eng",jp:"jpn",kr:"kor"},e.$snackbar(e.$t("hr.ocr.processing")),a.next=4,p["a"].ocrspace({file:t,language:r[e.$root.server]},e.setting.ocrspaceApikey).catch((function(t){return{IsErroredOnProcessing:!0,ErrorMessage:String(t)}}));case 4:if(n=a.sent,!n.IsErroredOnProcessing){a.next=8;break}return e.$snackbar({message:"".concat(e.$t("hr.ocr.error")).concat(m.a.castArray(n.ErrorMessage).map((function(t){return t.endsWith(".")?t:"".concat(t,".")})).join(" ")),timeout:0,buttonText:e.$t("common.retry"),onButtonClick:function(){return e.ocr(t)}}),a.abrupt("return");case 8:e.reset(),s={"·":"","千员":"干员","滅速":"減速","枳械":"机械","冫口了":"治疗"},i=m.a.reduce(s,(function(t,e,a){return t.replace(new RegExp(a,"g"),e)}),n.ParsedResults[0].ParsedText.trim()).split(/[\r\n]+/),console.log("OCR",JSON.stringify(i)),o=0,l=Object(c["a"])(i),a.prev=14,l.s();case 16:if((u=l.n()).done){a.next=26;break}if(d=u.value,!d.length||!(d in e.enumTag)){a.next=24;break}if(o++,!(o>6)){a.next=23;break}return e.$snackbar(e.$t("hr.ocr.tagOverLimit")),a.abrupt("return");case 23:e.selected.tag[e.enumTag[d]]=!0;case 24:a.next=16;break;case 26:a.next=31;break;case 28:a.prev=28,a.t0=a["catch"](14),l.e(a.t0);case 31:return a.prev=31,l.f(),a.finish(31);case 34:case"end":return a.stop()}}),a,null,[[14,28,31,34]])})))()},isPub:function(t){return t.includes(this.$root.localeEnum[this.$root.server])},detectPasteAndOCR:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.$route.path.startsWith("/hr")&&h["a"](t)){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,h["b"]();case 4:r=a.sent,r&&(e.tagImg=r);case 6:case"end":return a.stop()}}),a)})))()}},created:function(){var t=this,e=0;this.hr.forEach((function(a){var r,n=a.tags,s=a.profession,i=a.position,l=a.star,u=Object(c["a"])(n);try{for(u.s();!(r=u.n()).done;){var d=r.value;d!==$.新手&&t.tagList.abilities.add(d)}}catch(b){u.e(b)}finally{u.f()}switch(l){case 5:t.tags[$.资深干员].push(a);break;case 6:t.tags[$.高级资深干员].push(a);break}for(var m=0,p=[].concat(Object(o["a"])(n),[s,i]);m<p.length;m++){var h=p[m];t.tags[h]||(t.tags[h]=[]),t.tags[h].push(a)}e+=n.length+2}));var a=m.a.size(this.tags);this.avgCharTag=e/a,this.tagList.abilities=Array.from(this.tagList.abilities).sort(),this.selected.tag=m.a.mapValues(this.tags,(function(){return!1})),function(e){e&&(t.setting=Object(v["a"])(t.setting,e))}(y.getItem("setting")),this.$$(window).on("keydown",this.detectPasteAndOCR)},beforeDestroy:function(){this.$$(window).off("keydown",this.detectPasteAndOCR)}},x=C,O=(a("ac61"),a("2877")),j=Object(O["a"])(x,r,n,!1,null,null,null);e["default"]=j.exports},"42f8":function(t,e,a){},ab3e:function(t,e,a){"use strict";var r=a("5530"),n=(a("d3b7"),a("1276"),a("ac1f"),a("c579")),s=a.n(n),i=a("60bb"),o=a.n(i),c=a("e444"),l=s.a.JQ.ajax,u="https://jsonstorage.net",d=function(t){return new Promise((function(e,a){l(Object(r["a"])(Object(r["a"])({},t),{},{success:function(t){return e(t)},error:a}))}))};e["a"]={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d({method:"GET",url:t,dataType:e?"json":"text"})},tagOCR:function(t){var e=new FormData;return o.a.each(t,(function(t,a){return e.append(a,t)})),d({method:"POST",url:"/api/tagocr",processData:!1,data:e,dataType:"json",contentType:!1})},ocrspace:function(t,e){var a=new FormData;return o.a.each(t,(function(t,e){return a.append(e,t)})),d({method:"POST",url:"https://api.ocr.space/parse/image",processData:!1,data:a,dataType:"json",contentType:!1,headers:{apikey:e||"helloworld"}})},createJson:function(t){return d({method:"POST",url:"".concat(u,"/api/items"),processData:!1,data:JSON.stringify(t),dataType:"json",contentType:"application/json"}).then((function(t){var e=t.uri;return c["a"].encode(o.a.last(e.split("/")))}))},getJson:function(t){return d({method:"GET",url:"".concat(u,"/api/items/").concat(c["a"].decode(t)),dataType:"json",contentType:"application/json"})},updateJson:function(t,e){return d({method:"PUT",url:"".concat(u,"/api/items/").concat(c["a"].decode(t)),processData:!1,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})}}},ac61:function(t,e,a){"use strict";a("42f8")},e444:function(t,e,a){"use strict";(function(t){var r=a("2909"),n=(a("4d90"),a("fb6a"),a("5319"),a("ac1f"),a("d3b7"),a("25f0"),a("a15b"),a("d81d"),a("42a7")("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")),s="hex",i=32,o=[[0,8],[8,4],[12,4],[16,4],[20]],c=function(t,e){return t.slice(-e).padStart(e,"0")},l=function(e){var a=t.from(e.replace(/-/g,""),s);return n.encode(a)},u=function(e){var a=c(t.from(n.decode(e)).toString(s),i);return o.map((function(t){return a.substr.apply(a,Object(r["a"])(t))})).join("-")};e["a"]={encode:l,decode:u}}).call(this,a("b639").Buffer)},f71e:function(t,e,a){"use strict";a.d(e,"c",(function(){return d})),a.d(e,"a",(function(){return m})),a.d(e,"b",(function(){return p}));var r=a("b85c"),n=a("1da1"),s=(a("2ca0"),a("b0c0"),a("4de4"),a("99af"),a("1276"),a("ac1f"),a("96cf"),a("60bb")),i=a.n(s),o=a("0868"),c=a("9225"),l=function(){return Object(o["a"])({message:c["a"].t.apply(c["a"],arguments),timeout:6e3})},u=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,navigator&&"permissions"in navigator&&"clipboard"in navigator){t.next=4;break}return l("common.clipboard.notSupport",{name:e}),t.abrupt("return",!1);case 4:return t.next=6,navigator.permissions.query({name:e});case 6:if(a=t.sent.state,"granted"===a||"prompt"===a){t.next=10;break}return l("common.clipboard.permissionDenied",{name:e}),t.abrupt("return",!1);case 10:t.next=17;break;case 12:return t.prev=12,t.t0=t["catch"](0),console.error(t.t0),l("common.clipboard.notSupport",{name:e}),t.abrupt("return",!1);case 17:return t.abrupt("return",!0);case 18:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u("clipboard-write");case 2:if(!t.sent){t.next=13;break}return t.prev=3,t.next=6,navigator.clipboard.writeText(e);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](3),console.error(t.t0),l("common.clipboard.writeFailed");case 12:return t.abrupt("return",!0);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),m=function(t){var e,a,r=t.ctrlKey,n=t.metaKey,s=t.keyCode;return 86===s&&!!(r||null!==(e=navigator)&&void 0!==e&&null!==(a=e.platform)&&void 0!==a&&a.startsWith("Mac")&&n)},p=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u("clipboard-read");case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,navigator.clipboard.read().catch((function(t){return console.error(t),"DataError"===t.name?l("common.clipboard.readDataError"):l("common.clipboard.readFailed"),[]}));case 6:e=t.sent,a=Object(r["a"])(e),t.prev=8,a.s();case 10:if((n=a.n()).done){t.next=20;break}if(s=n.value,o=s.types.filter((function(t){return t.startsWith("image/")})),!(o.length>0)){t.next=18;break}return t.next=16,s.getType(o[0]);case 16:return c=t.sent,t.abrupt("return",new File([c],"clipboard-".concat(Date.now(),".").concat(i.a.last(o[0].split("/"))),{type:o[0]}));case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](8),a.e(t.t0);case 25:return t.prev=25,a.f(),t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[8,22,25,28]])})));return function(){return t.apply(this,arguments)}}()}}]);